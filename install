#!/bin/bash
git pull https://github.com/j3parker/dotfiles master

# re-evaluate this
# raco pkg install --deps search-auto pollen
# raco pkg install --deps search-auto git://github.com/j3parker/desolarized
# raco pollen render *.pp

DIR=`pwd | sed -e 's:^.*/::'`

cd ../
FILES=`ls $DIR/ | grep -v install`
for f in $FILES
do
  if [ ${f: -2} != ".p" ]; then
    echo .$f
    rm -rf ./.$f
    ln -s ./$DIR/$f ./.$f
  fi
done
source $HOME/.bashrc

# vundle + vim install
rm -rf $DIR/vim/bundle/vundle
git clone https://github.com/gmarik/vundle $DIR/vim/bundle/vundle
vim +BundleInstall +qall

# re-evaluate this
# vimproc stuff
# cd $HOME/.vim/bundle/vimproc.vim
# make -f make_unix.mak

# ultisnips extra install steps
mkdir -p $HOME/.vim/ftdetect/
ln -fs $HOME/.vim/bundle/ultisnips/ftdetect/* $HOME/.vim/ftdetect/
rm -rf $HOME/.vim/bundle/ultisnips/UltiSnips
